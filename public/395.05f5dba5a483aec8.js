"use strict";(self.webpackChunklive_lcti=self.webpackChunklive_lcti||[]).push([[395],{7395:(y,_,c)=>{c.r(_),c.d(_,{ParametresModule:()=>N});var s=c(9808),n=c(2382),u=c(6466),e=c(4893),m=c(5706);let g=(()=>{class o{constructor(t,r){this.modalService=t,this.router=r}retournerControles(){this.router.navigate(["/dossiers/en-cours"]),this.modalService.dismissAll()}sortir(){this.modalService.dismissAll()}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.FF),e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modale-retourner"]],decls:19,vars:0,consts:[[1,"container-fluid","px-0","pb-0",2,"background-color","#FFF4D2"],[1,"d-flex","flex-column","px-0"],[1,"d-flex","flex-row","justify-content-center"],[1,"d-flex","my-3"],["src","../assets/alert.svg","alt","","width","60","height","60","display","flex"],[1,"d-flex","mb-3"],[1,"modal-title"],[1,"d-flex","mb-4"],[1,"row","mt-auto","pb-4"],[1,"d-flex","flex-row"],[1,"btn","btn-outline-info","mx-auto",2,"background","white",3,"click"],[1,"btn","btn-info","mx-auto",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA()(),e.TgZ(5,"div",2)(6,"div",5)(7,"h4",6),e._uU(8," Attention, vous n\u2019avez pas enregistr\xe9 votre saisie. "),e.qZA()()(),e.TgZ(9,"div",2)(10,"div",7)(11,"h4",6),e._uU(12," Voulez-vous vraiment continuer ? "),e.qZA()()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"a",10),e.NdJ("click",function(){return r.sortir()}),e._uU(16,"Non, annuler"),e.qZA(),e.TgZ(17,"a",11),e.NdJ("click",function(){return r.retournerControles()}),e._uU(18,"Oui, continuer"),e.qZA()()()())},encapsulation:2}),o})(),f=(()=>{class o{constructor(t,r){this.modalService=t,this.router=r}ouvrirModalRetourner(){this.modalService.open(g,{size:"lg"})}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.FF),e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-nav-parametres"]],decls:7,vars:0,consts:[[1,"d-flex","flex-row","justify-content-between","mb-2"],[1,"align-self-center","me-2",2,"color","#122F62","font-weight","bold",3,"click"],["src","../assets/fleche.svg","alt","","width","18","height","18","display","flex"],[1,"ms-2"],[1,"align-self-center","me-4"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"a",1),e.NdJ("click",function(){return r.ouvrirModalRetourner()}),e._UZ(2,"img",2),e.TgZ(3,"U",3),e._uU(4,"Revenir \xe0 mes dossiers"),e.qZA()(),e._UZ(5,"span",4),e.qZA(),e._UZ(6,"router-outlet"))},directives:[u.lC],encapsulation:2}),o})();var p=c(9010);function v(o,i){if(1&o&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function C(o,i){if(1&o&&(e.TgZ(0,"div",21)(1,"div",23)(2,"div",24),e._UZ(3,"input",25),e.TgZ(4,"label",26),e._uU(5),e.qZA()()()()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("formControlName",t.control),e.xp6(2),e.Oqu(t.nom)}}function Z(o,i){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,C,6,2,"div",22),e.qZA()),2&o){const t=i.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",t.region==r.monFormulaire.value.region)}}let F=(()=>{class o{constructor(t,r,l){this.controleService=t,this.modalService=r,this.fb=l,this.monFormulaire=this.fb.group({region:["",[n.kI.required]]})}get inspecteursGroup(){return this.monFormulaire.get("inspecteurs")}get inspecteursArr(){return this.monFormulaire.get("inspecteurs")}ajouterInspecteurs(){this.controle.inspecteurs_controle=[],Object.keys(this.monFormulaire.controls).forEach((t,r)=>{var l,a;console.log(null===(l=this.monFormulaire.get(t))||void 0===l?void 0:l.value,r),1==(null===(a=this.monFormulaire.get(t))||void 0===a?void 0:a.value)&&(this.controle.inspecteurs_controle.push(r-1),console.log(this.controle.inspecteurs_controle,r)),this.controleService.setControle(this.controle)})}ngOnInit(){this.controle=this.controleService.getControle(),this.regions=this.controleService.getRegions(),this.data_inspecteurs=this.controleService.getDataInspecteurs(),this.data_inspecteurs.forEach((r,l)=>{this.monFormulaire.addControl("inspecteur".concat(l.toString()),this.fb.control(!1,n.kI.required)),this.controle.inspecteurs_controle.includes(l)&&this.monFormulaire.controls["inspecteur".concat(l.toString())].setValue(!0)}),this.monFormulaire.controls.region.setValue(this.regions[5])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.G),e.Y36(m.Kz),e.Y36(n.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-inspecteurs"]],decls:27,vars:3,consts:[[1,"container-fluid"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off",1,"row","g-1",3,"formGroup"],[1,"row"],[1,"col"],[1,"d-flex","justify-content-center"],[1,"h6","mb-3"],["src","../assets/id.svg","alt","","width","25","height","25","display","flex",1,""],[1,"col-10"],["formControlName","region",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","px-5",2,"height","150px"],["class","div ",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"d-grid","gap-3","col-8","mx-auto"],["type","button",1,"btn","btn-info",3,"click"],[3,"value"],[1,"div"],["class","div ",4,"ngIf"],[1,"form-check","form-switch","mt-2"],[1,"col-8"],["type","checkbox","id","flexSwitchCheckChecked",1,"form-check-input",3,"formControlName"],["for","flexSwitchCheckChecked",1,"form-check-label"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3," Inspecteurs associ\xe9s au contr\xf4le "),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.modalService.dismiss("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"p",10),e._UZ(13,"img",11),e._uU(14," Rechercher des inspecteurs par r\xe9gion "),e.qZA()()(),e.TgZ(15,"div",8)(16,"div",12)(17,"select",13),e.YNc(18,v,2,2,"option",14),e._uU(19,"> "),e.qZA()()()(),e.TgZ(20,"div",7)(21,"div",15),e.YNc(22,Z,2,1,"div",16),e.qZA()()()(),e.TgZ(23,"div",17)(24,"div",18)(25,"button",19),e.NdJ("click",function(){return r.modalService.dismiss("Cross click"),r.ajouterInspecteurs()}),e._uU(26," Valider la s\xe9lection "),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",r.monFormulaire),e.xp6(10),e.Q6J("ngForOf",r.regions),e.xp6(4),e.Q6J("ngForOf",r.data_inspecteurs))},directives:[n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,s.sg,n.YN,n.Kr,s.O5,n.Wl],encapsulation:2}),o})();function b(o,i){if(1&o&&(e.TgZ(0,"div",14)(1,"div",15)(2,"div",16),e._UZ(3,"input",17),e.TgZ(4,"label",18),e._uU(5),e.qZA()()()()),2&o){const t=i.$implicit;e.xp6(3),e.Q6J("formControlName",t.control),e.xp6(2),e.Oqu(t.nom)}}function T(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"input",21),e.NdJ("change",function(){return e.CHM(t),e.oxw().changeVal()}),e.qZA(),e.TgZ(3,"label",22),e._uU(4,"D\xe9tail du partenaire"),e.qZA()()()}}let x=(()=>{class o{constructor(t,r,l){this.controleService=t,this.modalService=r,this.fb=l,this.monFormulaire=this.fb.group({autre_partenaire:["",[n.kI.required]]})}ajouterPartenaires(){this.controle.partenaires_controle=[],Object.keys(this.monFormulaire.controls).forEach((t,r)=>{var l,a,d;0!=r&&(console.log(null===(l=this.monFormulaire.get(t))||void 0===l?void 0:l.value,r),1==(null===(a=this.monFormulaire.get(t))||void 0===a?void 0:a.value)&&(this.controle.partenaires_controle.push(r-1),console.log(this.controle.partenaires_controle,r),(null===(d=this.monFormulaire.get("partenaire14"))||void 0===d?void 0:d.value)&&(this.controle.autre_partenaire=this.monFormulaire.controls.autre_partenaire.value))),this.controleService.setControle(this.controle)})}changeVal(){}ngOnInit(){this.controle=this.controleService.getControle(),this.partenaires=this.controleService.getPartenaires(),this.data_partenaires=this.controleService.getDataPartenaires(),this.partenaires.forEach((t,r)=>{this.monFormulaire.addControl("partenaire".concat(r.toString()),this.fb.control(!1,n.kI.required)),this.controle.partenaires_controle.includes(r)&&this.monFormulaire.controls["partenaire".concat(r.toString())].setValue(!0)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.G),e.Y36(m.Kz),e.Y36(n.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-partenaires"]],decls:17,vars:3,consts:[[1,"container-fluid"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off",1,"row","g-1",3,"formGroup"],[1,"row"],[1,"d-flex","flex-column","px-5",2,"height","550px"],["class","div ",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"modal-footer"],[1,"d-grid","gap-3","col-8","mx-auto"],["type","button",1,"btn","btn-info",3,"click"],[1,"div"],[1,"form-check","form-switch","mt-2"],[1,"col-8"],["type","checkbox","id","flexSwitchCheckChecked",1,"form-check-input",3,"formControlName"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"col-12"],[1,"form-floating"],["type","text","formControlName","autre_partenaire","id","floatingInput_autre","placeholder","D\xe9tail du partenaire",1,"form-control",3,"change"],["for","floatingInput_autre"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3," Partenaires associ\xe9s au contr\xf4le "),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.modalService.dismiss("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8),e.YNc(11,b,6,2,"div",9),e.YNc(12,T,5,0,"div",10),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12)(15,"button",13),e.NdJ("click",function(){return r.modalService.dismiss("Cross click"),r.ajouterPartenaires()}),e._uU(16," Valider la s\xe9lection "),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",r.monFormulaire),e.xp6(3),e.Q6J("ngForOf",r.data_partenaires),e.xp6(1),e.Q6J("ngIf",r.monFormulaire.value.partenaire14))},directives:[n._Y,n.JL,n.sg,s.sg,n.Wl,n.JJ,n.u,s.O5,n.Fj],encapsulation:2}),o})();function k(o,i){if(1&o&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&o){const t=i.$implicit,r=e.oxw();e.xp6(1),e.Oqu(r.data_inspecteurs[t].nom)}}function q(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.controle.autre_partenaire)}}function A(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Oqu(r.data_partenaires[t].nom)}}function S(o,i){if(1&o&&(e.TgZ(0,"span",22),e.YNc(1,q,2,1,"span",23),e.YNc(2,A,2,1,"span",23),e.qZA()),2&o){const t=i.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf","Autre partenaire"==r.data_partenaires[t].nom),e.xp6(1),e.Q6J("ngIf","Autre partenaire"!=r.data_partenaires[t].nom)}}function I(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().creerControle()}),e._uU(2," Commencer le contr\xf4le "),e.qZA()()}}function P(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().creerControle()}),e._uU(2," Revenir au contr\xf4le "),e.qZA()()}}let h=(()=>{class o{constructor(t,r,l,a){this.fb=t,this.controleService=r,this.router=l,this.modalService=a,this.noteDefault=[],this.newControle={id:"",nomControle:"",newControle:!0,etat:"",dt_controle:"",hr_controle:"",lieu_controle:"",inspecteurs_controle:[],partenaires_controle:[],autre_partenaire:"",entreprises_controle:[],individus_controle:[],notesCont:this.noteDefault},this.monFormulaire=this.fb.group({nomControle:["",[n.kI.required]],dt_controle:["",[n.kI.required]],hr_controle:["",[n.kI.required]],lieu_controle:["",[n.kI.required]],inspecteurs_controle:["",[n.kI.required]],partenaires_controle:["",[n.kI.required]]})}changeVal(){this.controle.nomControle=this.monFormulaire.controls.nomControle.value,this.controle.dt_controle=this.monFormulaire.controls.dt_controle.value,this.controle.hr_controle=this.monFormulaire.controls.hr_controle.value,this.controle.lieu_controle=this.monFormulaire.controls.lieu_controle.value,this.controleService.setControle(this.controle)}ouvrirModalInspecteurs(){this.modalService.open(F,{size:"lg"}),this.controle=this.controleService.getControle()}ouvrirModalPartenaires(){this.modalService.open(x,{size:"lg"}),this.controle=this.controleService.getControle()}obtenirDate(t){return[t.getFullYear(),(t.getMonth()+1).toString().padStart(2,"0"),t.getDate().toString().padStart(2,"0")].join("-")}obtenirHeure(t){return[t.getHours().toString().padStart(2,"0"),t.getMinutes().toString().padStart(2,"0")].join(":")}creerControle(){console.log("MaJ du controle");let t=this.controle;t.newControle=!1,t.etat="created",this.controleService.editerControle(t).subscribe(r=>{console.log("reponse",r),this.controle=r,this.controleService.setControle(r)}),this.router.navigate(["/controle/individus",this.controle.id])}ngOnInit(){this.controle=this.controleService.getControle(),console.log("new service control",this.controleService.getNewControle(),this.controleService.getControle()),this.data_inspecteurs=this.controleService.getDataInspecteurs(),this.data_partenaires=this.controleService.getDataPartenaires(),this.controle.newControle?(this.date=this.obtenirDate(new Date),this.time=this.obtenirHeure(new Date),this.monFormulaire.controls.dt_controle.setValue(this.date),this.monFormulaire.controls.hr_controle.setValue(this.time),console.log("current init control",this.controle),this.changeVal()):(this.monFormulaire.controls.dt_controle.setValue(this.controle.dt_controle),this.monFormulaire.controls.hr_controle.setValue(this.controle.hr_controle),this.monFormulaire.controls.lieu_controle.setValue(this.controle.lieu_controle),this.monFormulaire.controls.nomControle.setValue(this.controle.nomControle),this.monFormulaire.controls.inspecteurs_controle.setValue(this.controle.inspecteurs_controle),this.monFormulaire.controls.partenaires_controle.setValue(this.controle.partenaires_controle))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(n.qu),e.Y36(p.G),e.Y36(u.F0),e.Y36(m.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-parametres"]],decls:48,vars:7,consts:[[1,"h3","text-center","mb-4",2,"color","#1D458C"],["autocomplete","off",1,"row","g-1",3,"formGroup"],[1,"row"],[1,"col"],[1,"row","mb-3"],[1,"form-floating"],["type","date","formControlName","dt_controle","id","floatingInputdt_controle",1,"form-control",3,"change"],["for","floatingInputdt_controle"],["type","time","formControlName","hr_controle","id","floatingInputhr_controle",1,"form-control",3,"change"],["for","floatingInputhr_controle"],["type","text","formControlName","lieu_controle","id","floatingInputdt_controle",1,"form-control",3,"change"],["type","text","formControlName","nomControle","id","floatingInputnomControle",1,"form-control",3,"change"],["for","floatingInputnomControle"],[1,"card","mb-2"],[1,"card-body","py-1"],[1,"card-title"],["class","badge bg-secondary rounded-pill mx-1",4,"ngFor","ngForOf"],[1,"d-grid","mt-1"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["src","../assets/associer.png","alt","img associer","width","15","height","15","display","flex",1,"me-1"],[1,"card"],["class","d-grid mt-1",4,"ngIf"],[1,"badge","bg-secondary","rounded-pill","mx-1"],[4,"ngIf"],["type","button",1,"btn","btn-info",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"p",0),e._uU(1,"Param\xe9trage du contr\xf4le"),e.qZA(),e.TgZ(2,"div")(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"input",6),e.NdJ("change",function(){return r.changeVal()}),e.qZA(),e.TgZ(9,"label",7),e._uU(10,"Date du contr\xf4le"),e.qZA()()(),e.TgZ(11,"div",4)(12,"div",5)(13,"input",8),e.NdJ("change",function(){return r.changeVal()}),e.qZA(),e.TgZ(14,"label",9),e._uU(15,"Heure d\xe9but contr\xf4le"),e.qZA()()(),e.TgZ(16,"div",4)(17,"div",5)(18,"input",10),e.NdJ("change",function(){return r.changeVal()}),e.qZA(),e.TgZ(19,"label",7),e._uU(20,"Lieu du contr\xf4le"),e.qZA()()()(),e.TgZ(21,"div",3)(22,"div",4)(23,"div",5)(24,"input",11),e.NdJ("change",function(){return r.changeVal()}),e.qZA(),e.TgZ(25,"label",12),e._uU(26,"Nom du contr\xf4le"),e.qZA()()(),e.TgZ(27,"div",13)(28,"div",14)(29,"h6",15),e._uU(30),e.qZA(),e.YNc(31,k,2,1,"span",16),e.TgZ(32,"div",17)(33,"button",18),e.NdJ("click",function(){return r.ouvrirModalInspecteurs()}),e._UZ(34,"img",19),e._uU(35," Ajouter/modifier des inspecteurs "),e.qZA()()()(),e.TgZ(36,"div",20)(37,"div",14)(38,"h6",15),e._uU(39),e.qZA(),e.YNc(40,S,3,2,"span",16),e.TgZ(41,"div",17)(42,"button",18),e.NdJ("click",function(){return r.ouvrirModalPartenaires()}),e._UZ(43,"img",19),e._uU(44," Ajouter/modifier des partenaires "),e.qZA()()()()()()(),e.TgZ(45,"div",2),e.YNc(46,I,3,0,"div",21),e.YNc(47,P,3,0,"div",21),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",r.monFormulaire),e.xp6(27),e.hij("",r.controle.inspecteurs_controle.length," Inspecteurs associ\xe9s au contr\xf4le"),e.xp6(1),e.Q6J("ngForOf",r.controle.inspecteurs_controle),e.xp6(8),e.hij("",r.controle.partenaires_controle.length," Partenaires associ\xe9s au contr\xf4le"),e.xp6(1),e.Q6J("ngForOf",r.controle.partenaires_controle),e.xp6(6),e.Q6J("ngIf",r.controle.newControle),e.xp6(1),e.Q6J("ngIf",!r.controle.newControle))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,s.sg,s.O5],encapsulation:2}),o})();const J=[{path:"",component:f,children:[{path:"config",component:h},{path:"edition/:id",component:h},{path:"**",redirectTo:"config"}]}];let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.Bz.forChild(J)],u.Bz]}),o})(),N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[w,s.ez,n.u5,n.UX,u.Bz,m.IJ]]}),o})()}}]);